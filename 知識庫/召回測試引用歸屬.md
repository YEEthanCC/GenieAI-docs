# 召回測試/引用歸屬
## 1 召回測試
GenieAI 知識庫內提供了文字回想測試的功能，用於調試不同檢索方式及參數配置下的召回效果。你可以在**來源文字**輸入框輸入常見的使用者問題，點擊**測試**並在右側的**召回段落**查看召回結果。在**最近查詢**內可以查看到歷史的查詢記錄；若知識庫已關聯至應用程式內，由應用程式內觸發的知識庫查詢也可以在此查看記錄。

![召回測試](/知識庫/images/召回測試.png)

點擊來源文字輸入框右上角的圖示可以更換目前知識庫的檢索方式和特定參數，保存之後僅在召回測試的調試過程中生效。在召回測試完成調試並確認更改知識庫的檢索參數時，需要在  知識庫設定> 檢索設定 中進行更改。

![召回測試-檢索設置](/知識庫/images/召回測試-檢索設置.png)

**召回測試建議步驟：**

1. 設計和整理覆蓋常見使用者問題的測試案例/測試問題集；
2. 選擇適當的檢索策略：向量檢索/全文檢索/混合檢索，不同檢索方式的優缺點;
3. 調試召回分段數量（TopK）和召回分數閾值（Score），需根據應用場景、包含文件本身的品質來選擇合適的參數組合。

**TopK 值和召回閾值（Score ）如何配置**

- **TopK 代表以相似分數倒排時召回分段的最大個數**。 TopK 值調小，將會召回較少分段，可能導致召回的相關文字不全；TopK 值調大，將召回更多分段，可能導致召回語意相關性較低的分段使得LLM 回復品質降低。
- **召回閾值（Score）代表允許召回分段的最低相似分數**。召回分數調小，將會召回更多分段，可能導致召回相關度較低的分段；召回分數閾值調大，將會召回較少分段，過大時將會導致遺失相關分段。

## 2 引用與歸屬
在套用內測試知識庫效果時，你可以進入**工作室-- 新增功能-- 引用歸屬**，開啟引用歸屬功能。

![開啟引用與歸屬功能](/知識庫/images/開啟引用與歸屬功能.png)

開啟功能後，當大語言模型回覆問題時引用來自知識庫的內容時，可以在回复內容下面查看到具體的引用段落信息，包括**原始分段文本、分段序號、匹配度**等。點擊引用分段上方的**跳轉至知識庫**，可以快速存取該分段所在的知識庫分段列表，方便開發者進行調試編輯。

![查看回覆內容的引用訊息](/知識庫/images/查看回覆內容的引用訊息.png)