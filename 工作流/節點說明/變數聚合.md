# 變數聚合
## 1 定義
將多路分支的變數聚合為一個變量，以實現下游節點統一配置。

變數聚合節點（原變數賦值節點）是工作流程中的關鍵節點，它負責整合不同分支的輸出結果，確保無論哪個分支被執行，其結果都能透過一個統一的變數來引用和存取。這在多分支的情況下非常有用，可將不同分支下相同作用的變數對應為輸出變量，避免下游節點重複定義。

## 2 場景
透過變數聚合，可以將諸如問題分類或條件分支等多路輸出聚合為單路，供流程下游的節點使用和操作，簡化了資料流的管理。

**問題分類後的多路聚合**
未加入變數聚合，分類1 和分類2 分支經不同的知識庫檢索後需要重複定義下游的LLM 和直接回復節點。

![問題分類（無變數聚合）](/工作流程/節點說明/images/問題分類（無變數聚合）.png)

新增變數聚合，可以將兩個知識檢索節點的輸出聚合為一個變數。

![問題分類後的多路聚合](/工作流程/節點說明/images/問題分類後的多路聚合.png)

**IF/ELSE** 條件分支後的多路聚合

![if_else問題分類後的多路聚合](/工作流程/節點說明/images/if_else問題分類後的多路聚合.png)

## 3 格式要求
變數聚合器支援聚合多種資料類型，包括字串（```String```）、數字（```Number```）、物件（```Object```）以及陣列（```Array```）。

**變數聚合器只能聚合約一種資料類型的變數**。若第一個新增至變數聚合節點內的變數資料格式為String，後續連線時會自動過濾可新增變數為String類型。

**聚合分組**

v0.6.10 版本之後已支援聚合分組。

開啟聚合分組後，變數聚合器可以聚合多組變量，各組內聚合時要求同一種資料型態。