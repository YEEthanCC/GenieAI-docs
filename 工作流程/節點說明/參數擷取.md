# 參數擷取
## 1 定義
利用LLM 從自然語言推理並提取結構化參數，用於後置的工具呼叫或HTTP 請求。

GenieAI 工作流程內提供了豐富的工具選擇，其中大多數工具的輸入為結構化參數，參數提取器可以將使用者的自然語言轉換為工具可識別的參數，方便工具呼叫。

工作流程內的部分節點有特定的資料格式傳入要求，如迭代節點的輸入要求為數組格式，參數擷取器可以方便的實現結構化參數的轉換。
## 2 場景
1. **從自然語言中提供工具所需的關鍵參數提取**，例如建立一個簡單的對話式Arxiv 論文檢索應用。
在這個範例中：Arxiv 論文檢索工具的輸入參數要求為**論文作者**或**論文編號**，參數擷取器從問題「這篇論文中講了什麼內容：2405.10739」中提取出論文編號**2405.10739**，並作為工具參數進行精確查詢。

![Arxiv論文檢索工具](/工作流程/節點說明/images/Arxiv論文檢索工具.png)

2. **將文字轉換為結構化數據**，如長故事迭代生成應用中，作為迭代節點的前置步驟，將文字格式的章節內容轉換為數組格式，方便迭代節點進行多輪生成處理。

![文字轉換為結構化數據](/工作流程/節點說明/images/文字轉換為結構化數據.png)

3. **提取結構化資料並使用HTTP請求**，可請求任意可存取的URL，適用於取得外部檢索結果、webhook、生成圖片等情境。

## 3 如何配置
配置參數提取器

![配置參數提取器](/工作流程/節點說明/images/配置參數提取器.png)

**設定步驟**
1. 選擇輸入變量，一般為用於擷取參數的變數輸入
2. 選擇模型，參數提取器的提取依靠的是LLM 的推理和結構化生成能力
3. 定義擷取參數，可手動新增需要擷取的參數，也可以**從已有工具中快速匯入**
4. 編寫指令，在提取複雜的參數時，編寫範例可以幫助LLM 提升生成的效果和穩定性

**進階設定**
**推理模式**
部分模型同時支援兩種推理模式，透過函數/工具呼叫或純提示詞的方式實現參數提取，在指令遵循能力上有所差異。例如某些模型在函數呼叫效果不佳的情況下可以切換成提示詞推理。
- Function Call/Tool Call
- Prompt  

**記憶**
開啟記憶後問題分類器的每次輸入將包含對話中的聊天歷史，以幫助LLM 理解上文，提高對話互動中的問題理解能力。
**輸出變數**
- 提取定義的變數
- 節點內建變數

```__is_success Number 提取是否成功```成功時值為1，失敗時值為0。
```__reason String```提取錯誤原因
